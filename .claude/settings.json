{
  "$schema": "https://json.schemastore.org/claude-code-settings.json",
  "hooks": {
    "SessionStart": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/scripts/hooks/session-start.cjs"
          }
        ]
      }
    ],
    "Stop": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/scripts/hooks/session-end.cjs"
          }
        ]
      },
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/scripts/hooks/evaluate-session.cjs"
          }
        ]
      },
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"const{execSync}=require('child_process');const fs=require('fs');try{execSync('git rev-parse --git-dir',{stdio:'pipe'})}catch{process.exit(0)}try{const files=execSync('git diff --name-only HEAD',{encoding:'utf8',stdio:['pipe','pipe','pipe']}).split('\\n').filter(f=>/\\.(ts|tsx|js|jsx)$/.test(f)&&fs.existsSync(f));let found=false;for(const f of files){if(fs.readFileSync(f,'utf8').includes('console.log')){console.error('[Hook] WARNING: console.log in '+f);found=true}}if(found)console.error('[Hook] Remove before committing')}catch(e){}\""
          }
        ]
      }
    ],
    "PreCompact": [
      {
        "matcher": "",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/scripts/hooks/pre-compact.cjs"
          }
        ]
      }
    ],
    "PreToolUse": [
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"const cmd=process.env.CLAUDE_BASH_COMMAND||'';if(/^git commit/.test(cmd)){const{execSync}=require('child_process');try{execSync('pnpm run lint && pnpm run typecheck',{stdio:'inherit'})}catch(e){process.exit(1)}}\""
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"const cmd=process.env.CLAUDE_BASH_COMMAND||'';if(/^git push/.test(cmd)){console.error('[Hook] Pushing to remote...');console.error('[Hook] Ensure all tests pass and PR is ready')}\""
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"const cmd=process.env.CLAUDE_BASH_COMMAND||'';if(/(npm run dev|pnpm( run)? dev|yarn dev|bun run dev)/.test(cmd)){console.error('[Hook] TIP: Consider running dev server in tmux for log access');console.error('[Hook] Use: tmux new-session -d -s dev \\\"pnpm dev\\\"')}\""
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"const cmd=process.env.CLAUDE_BASH_COMMAND||'';if(/(pnpm (install|test)|npm (install|test)|vitest|playwright)/.test(cmd)&&!process.env.TMUX){console.error('[Hook] TIP: Consider tmux for long-running commands');console.error('[Hook] tmux new -s dev | tmux attach -t dev')}\""
          }
        ]
      },
      {
        "matcher": "Write",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"const p=process.env.CLAUDE_FILE||'';if(/\\.(md|txt)$/.test(p)&&!/(README|CLAUDE|AGENTS|CONTRIBUTING|SKILL|spec-template)\\.md$/.test(p)&&!/\\/(specs|rules|contexts|commands|agents|skills)\\//.test(p)){console.error('[Hook] WARNING: Creating doc file: '+p);console.error('[Hook] Prefer README.md or existing doc locations')}\""
          }
        ]
      },
      {
        "matcher": "Edit|Write",
        "hooks": [
          {
            "type": "command",
            "command": "node .claude/scripts/hooks/suggest-compact.cjs"
          }
        ]
      }
    ],
    "PostToolUse": [
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"const p=process.env.CLAUDE_FILE||'';if(/\\.(ts|tsx)$/.test(p)){const{execSync}=require('child_process');try{execSync('npx tsc --noEmit --pretty',{stdio:'inherit'})}catch(e){}}\""
          }
        ]
      },
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"const p=process.env.CLAUDE_FILE||'';if(/\\.(ts|tsx|js|jsx)$/.test(p)){const{execSync}=require('child_process');try{execSync('npx eslint --fix \"'+p+'\"',{stdio:'inherit'})}catch(e){}}\""
          }
        ]
      },
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"const p=process.env.CLAUDE_FILE||'';if(/\\.(ts|tsx|js|jsx|json|css|scss|md)$/.test(p)){const{execSync}=require('child_process');try{execSync('npx prettier --write \"'+p+'\"',{stdio:'inherit'})}catch(e){}}\""
          }
        ]
      },
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"const p=process.env.CLAUDE_FILE||'';if(/src\\/.*\\.(ts|tsx)$/.test(p)){const{execSync}=require('child_process');try{execSync('npx vitest related \"'+p+'\" --run --passWithNoTests',{stdio:'inherit'})}catch(e){}}\""
          }
        ]
      },
      {
        "matcher": "Edit",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"const fs=require('fs');const p=process.env.CLAUDE_FILE||'';if(p&&/\\.(ts|tsx|js|jsx)$/.test(p)&&fs.existsSync(p)){const c=fs.readFileSync(p,'utf8');const lines=c.split('\\n');const matches=[];lines.forEach((l,idx)=>{if(/console\\.log/.test(l))matches.push((idx+1)+': '+l.trim())});if(matches.length){console.error('[Hook] WARNING: console.log found in '+p);matches.slice(0,5).forEach(m=>console.error(m));console.error('[Hook] Remove console.log before committing')}}\""
          }
        ]
      },
      {
        "matcher": "Bash",
        "hooks": [
          {
            "type": "command",
            "command": "node -e \"const cmd=process.env.CLAUDE_BASH_COMMAND||'';if(/gh pr create/.test(cmd)){const out=process.env.CLAUDE_TOOL_OUTPUT||'';const m=out.match(/https:\\/\\/github.com\\/[^\\s]+\\/pull\\/\\d+/);if(m){console.error('[Hook] PR created: '+m[0]);console.error('[Hook] To view: gh pr view '+m[0].split('/').pop())}}\""
          }
        ]
      }
    ]
  }
}
